03-calculator-builder-prd.txt
Part 3: Calculator Builder & Formula Engine
Description: Implement the no-code calculator builder with drag-and-drop form creation, visual formula editor, and shortcode system.
Core Features:

Drag-and-Drop Form Builder - Field library, section management, real-time preview
Shortcode/Formula System - Visual formula editor, variable selection, math functions
Visual Elements Management - Image upload, carousel configuration, display modes
Field Configuration Panel - Validation rules, conditional logic, dependencies
Email Template Builder - WYSIWYG editor with shortcode support
Preview & Test Mode - Live calculator testing with sample data

Technical Implementation:

@dnd-kit Integration - Drag-and-drop functionality for form fields
Formula Parser - Safe math evaluation engine with variable substitution
Visual Element Storage - Supabase storage integration for media
Resend Email Service - Email template processing with shortcodes

Dependencies:

Part 1 (Core Infrastructure) must be complete
Part 2 (Admin Panel) must be complete

Testing Strategy:
Form builder drag-and-drop testing, formula calculation accuracy verification, visual element trigger testing, and email template rendering validation.
Success Criteria:

Can create multi-step form with drag-and-drop
Formulas calculate correctly with test data
Visual elements display based on triggers
Email templates render with shortcodes
Preview mode shows accurate representation